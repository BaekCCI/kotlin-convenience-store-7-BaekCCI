# kotlin-convenience-store-precourse

## 기능목록

### 입력

---
**_구매할 상품 및 수량_**
- 상품명, 수량은 하이픈으로 구분
- 개별 상품은 대괄호([])로 묶어 쉼표로 구분
    ```
    [콜라-10], [사이다-3]
    ```

**_프로모션 적용 여부_**
- 프로모션 적용 가능한 상품을 해당 수량보다 적게 입력한 경우
  - 그 수량만큼 추가 여부 입력
  - Y: 증정 받을 수 있는 상품 추가 O
  - N: 증정 받을 수 있는 상품 추가 X


- 상품 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우
  - 일부 수량에 대해 정가로 결제할지 여부 입력
  - Y: 일부 수량에 대해 정가 결제
  - N: 정가로 결제해야하는 수량 제외 후 결제

**_멤버십 할인 적용 여부_**
- 멤버십 할인 적용 여부 입력
  - Y: 멤버십 할인 적용 O
  - N: 멤버십 할인 적용 X

**_추가 구매_**
- 추가 구매 여부 입력
  - Y: 재고가 업데이트된 상품 목록 확인 후 추가 구매 진행
  - N: 구매 종료

### 출력

---

**_환영 인사와 상품 정보 출력_**
  - 재고가 없으면 재고 없음을 출력
```
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- ${상품명} ${상품가격} ${상품수량} ${프로모션 이름}
```
**_상품 구매 안내 메세지_**
```
구매하실 상품명과 수량을 입력해 주세요.(예: [사이다-2],[감자칩-1])
```

**_프로모션 적용 가능한 상품을 해당 수량보다 적게 입력한 경우, 혜택 안내 메시지_**
```
현재 ${상품명}은(는) ${추가수량}개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
```

**_프로모션 재고 부족으로 혜택 없이 결제하는 경우, 일부 수량에 대한 정가 결제 안내 메세지_**
```
현재 ${상품명} ${수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
```

**_멤버십 할인 안내 메세지_**
```
멤버십 할인을 받으시겠습니까? (Y/N)
```

**_구매 상품 정보_**
```
===========W 편의점=============
상품명		    수량      금액
${상품명}        ${수량}   ${상품금액}
...
===========증    정=============
총구매액         ${총수량}  ${총금액}
행사할인                   ${할인금액}
멤버십할인                 ${할인금액}
내실돈                     ${결제금액}
```

**_추가 구매 여부 안내 메세지_**
```
감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
```

### 상품 관리

---

**_재고 관리_**
- 상품의 재고 수량을 고려하여 결제 가능 여부 확인
- 상품 구매 시 즉시 상품 재고에서 차감

**_프로모션 할인_**
- 오늘 날짜가 프로모션 기간에 포함되는지 확인
- 프로모션 재고 우선 차감 후 일반 재고 사용

**_멤버십 할인_**
- 구매금액의 30% 할인
- 프로모션 적용 상품은 할인을 적용하지 않음
- ex) 2+1 프로모션이 적용 중인 콜라 4개 구매 시
  - 프로모션이 적용된 3개를 제외한 1개에만 적용
- 멤버십 할인 최대 한도 = 8,000

### 영수증

---

**_영수증 항목_**
- 구매 상품 내역: 상품명, 수량, 가격
- 증정 상품 내역: 프로모션에 따른 증정 상품 목록
- 금액 정보
  - 총 구매액: 구매한 상품의 총 수량 및 금액
  - 행사 할인: 프로모션에 의해 할인된 금액
  - 멤버십 할인: 멤버십에 의해 추가로 할인된 금액
  - 내실돈: 최종 결제 금액

### 예외 처리

---

_각 입력에 대한 예외 발생 시 오류 메세지 출력 후 사용자 입력을 다시 받는다_

**_구매 상품 입력_**
- 구매할 상품과 수량 형식이 올바르지 않을 시: `[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
- 존재하지 않는 상품 입력 시 :`[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
- 구매 수량이 재고 수량을 초과한 경우: `[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`

**_멤버십, 프로모션 관련 Y/N 입력_**
- Y, N 이외의 문자 입력 시 : `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
  - Y,N에 대한 대소문자는 모두 허용한다.


### 고민중인 내용

---

- ex) 사용자가 2+1 프로모션 상품을 1개 구매할 시
  - 행사 상품이라는 안내 메세지 출력할지..(Y/N)
  - Y 입력 시 증정 받는 상품을 포함한 총 세개의 상품 구매
  - 실제 편의점 이용시 행사상품을 구매하면 2개를 구매하지 않더라도 결제 화면에는 행사 정보가 뜨기 때문


- `재고를 차감함으로써 시스템은 최신 재고 상태를 유지하며, 다음 고객이 구매할 때 정확한 재고 정보를 제공한다.`
  - 다음 고객? -> 프로그램 종료 후 다시 실행해도 재고 상태가 유지되야 하는가
  - `두 파일 모두 내용의 형식을 유지한다면 값은 수정할 수 있다.`가 적혀있긴 함..
  
  
- 상품 구매 후 추가 구매를 할 때 만약 사용자가 업데이트 된 상품 목록을 보고 사고 싶은게 없다면?
  - 구매 시 상품 구매를 종료할 수 있는 선택지를 제공해야 하는가


- `프로모션 기간 중이라면 프로모션 재고를 우선적으로 차감하며, 프로모션 재고가 부족할 경우에는 일반 재고를 사용한다.`
  - 프로모션 기간이 아니라면?
  - 기간이 아닐 경우 일반 상품 재고 사용 -> 재고 부족 시 프로모션 재고를 사용해도 되는지

- 프로모션 적용 상품을 적용 기준보다 적게 가져왔을 때
  - 만약 프로모션 적용했을 때의 수량이 재고 보다 적다면
  - '추가 메세지 + 재고 부족 메세지' OR '프로모션 메세지 X' OR '재고가 없어 프로모션 적용 불가 메세지'